import{f as e,_ as t,c as a,R as s,w as r,A as l,a as o,b as n,L as c,r as m,e as d,H as i}from"./prefetch.helper-4a4e89e7.js";import{P as b}from"./UIComponents-1eb3bdbf.js";import{d as u}from"./BEConfigProvider-697f66d7.js";import{a as f,u as w}from"./page-agent.js";import{A as h,a as g,b as y}from"./AgentScheduleTab-f2a58cc2.js";import{S as p}from"./Settings.styled-5e4db2ce.js";import{l as E}from"./lodash-f550b173.js";import{g as k}from"./agentSchedule.helper-648c495b.js";import{a as x,b as N,c as _,g as v}from"./WeeklyScheduleEditor-df3fc586.js";import"./DeleteAppointmentButton-e4b7a1de.js";import"./createBookTimeInput.helper-a66a36a8.js";import"./useBreakpoint-2ef0bad1.js";import"./index-f9ec547e.js";import"./useEffectWithTarget-688d6bb0.js";import"./index-ad7a2af3.js";import"./appointment.helper-80ab8c9c.js";import"./HiddenInput-2f0ce489.js";import"./holiday.helper-ca9c72dc.js";function C(){const m=f(),d=w((e=>e.saveAgentSetting)),i=w((e=>e.profile.isLoading)),[b]=e.Form.useForm(),{toast:u}=t.useToast(),y=a.useNavigate(),{tabId:k="schedule"}=a.useParams();return s.createElement(e.Form,{form:b,layout:"vertical",initialValues:m??{},onFinish:e=>{e.weekly_schedule=e.weekly_schedule?r(e.weekly_schedule):e.weekly_schedule,e.dayoff_schedule=e.dayoff_schedule?l(e.dayoff_schedule):e.dayoff_schedule,async function(e){try{await d(m.agent_id,E.pick(e,["weekly_schedule","weekly_schedule_enabled","dayoff_schedule","dayoff_schedule_enabled"])),u.success("Settings have been Saved Successfully!")}catch(t){u.error(await a.getErrorMsg(t))}}(e)}},s.createElement(t.TabsRoot,{defaultValue:"schedule",value:k},s.createElement(t.LoadingOverlay,{loading:i}),s.createElement(t.TabsList,{"aria-label":"tabs settings",className:"bw-mb-8 bw-justify-center bw-gap-1"},s.createElement(t.CardTabsTrigger,{value:"schedule",onClick:()=>{y("/settings/schedule")}},s.createElement(o.Clock,{className:"bw-mr-2"}),n.__("Schedule","bookster")),s.createElement(t.CardTabsTrigger,{value:"daysoff",onClick:()=>{y("/settings/daysoff")}},s.createElement(o.CalendarDays,{className:"bw-mr-2"}),n.__("Days Off","bookster"))),s.createElement(t.TabsContent,{value:"schedule",className:"bw-mx-auto bw-max-w-screen-lg",forceMount:!1},s.createElement("h4",{className:"bw-text-lg bw-font-medium"},"Weekly Working Schedule"),s.createElement("p",{className:"bw-mb-6 bw-text-base bw-text-base-foreground/60"},"Use the default weekly schedule, or switch to custom schedule to override the default."),s.createElement(h,null),s.createElement(p,null)),s.createElement(t.TabsContent,{value:"daysoff",className:"bw-mx-auto bw-max-w-screen-xl",forceMount:!1},s.createElement("h4",{className:"bw-text-lg bw-font-medium"},"Yearly Day-off Schedule"),s.createElement("p",{className:"bw-mb-6 bw-text-base bw-text-base-foreground/60"},n.sprintf(n.__("Add your days off for the year. %(customers)s will be notified when you are not available.","bookster"),c)),s.createElement(g,null),s.createElement(p,null))))}function j({legend:e,mode:t,dayOff:a}){const[r,l]=m.useState(S);return s.createElement(x.Provider,{value:{holidaysSettings:window.booksterPublicData.holidaysSettings,year:r,mode:t,dayOff:a,onClickCell:function(){},onMouseEnterCell:function(){}}},s.createElement(N,{legend:e,decrement:()=>{l(r-1)},increment:()=>{l(r+1)}}),s.createElement("div",{className:"bw-grid bw-grid-cols-[repeat(auto-fill,minmax(20rem,1fr))] bw-gap-6"},T.map((e=>s.createElement(_,{key:e,month:e,selected:[]})))))}const T=E.range(12),S=(new Date).getFullYear();function D(){const e=f(),{dayoff:t}=k(e);return s.createElement(j,{legend:y,mode:"dayoff",dayOff:t})}function M(){const e=f(),{weekly:a}=k(e);return s.createElement("div",{className:"bw-rounded bw-border bw-border-b-0 bw-border-solid bw-border-base-border bw-bg-base-bg1"},i.map((e=>s.createElement("div",{key:e,className:"bw-flex bw-cursor-not-allowed bw-items-center bw-justify-between bw-border-0 bw-border-b bw-border-solid bw-border-base-border bw-px-4 bw-py-3"},s.createElement(t.Switch,{checkedChildren:"Work",unCheckedChildren:"Off",checked:a[e].working}),s.createElement(t.Label,{className:"bw-ml-2 bw-flex-grow"},W[e]),s.createElement("span",null,v(a[e].periods))))))}const W=d.dayjs().localeData().weekdays();function A(){const e=a.useNavigate(),{tabId:r="schedule"}=a.useParams();return s.createElement(t.TabsRoot,{value:r},s.createElement(t.TabsList,{"aria-label":"tabs settings",className:"bw-mb-8 bw-justify-center bw-gap-1"},s.createElement(t.CardTabsTrigger,{value:"schedule",onClick:()=>{e("/settings/schedule")}},s.createElement(o.Clock,{className:"bw-mr-2"}),n.__("Schedule","bookster")),s.createElement(t.CardTabsTrigger,{value:"daysoff",onClick:()=>{e("/settings/daysoff")}},s.createElement(o.CalendarDays,{className:"bw-mr-2"}),n.__("Days Off","bookster"))),s.createElement(t.TabsContent,{value:"schedule",className:"bw-mx-auto bw-max-w-screen-lg",forceMount:!1},s.createElement("h4",{className:"bw-text-lg bw-font-medium"},"Weekly Working Schedule"),s.createElement("p",{className:"bw-mb-6 bw-text-base bw-text-base-foreground/60"},"Note: This schedule is for reference only and cannot be modified. For more information, please contact the Manager."),s.createElement(M,null)),s.createElement(t.TabsContent,{value:"daysoff",className:"bw-mx-auto bw-max-w-screen-xl",forceMount:!1},s.createElement("h4",{className:"bw-text-lg bw-font-medium"},"Yearly Day-off Schedule"),s.createElement("p",{className:"bw-mb-6 bw-text-base bw-text-base-foreground/60"},"Note: This schedule is for reference only and cannot be modified. For more information, please contact the Manager."),s.createElement(D,null)))}function F(){return s.createElement(b,{className:"bw-py-6"},u.writeSchedule?s.createElement(C,null):s.createElement(A,null))}export{F as default};
