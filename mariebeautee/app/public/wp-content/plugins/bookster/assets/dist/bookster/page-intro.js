import{R as e,c as t,_ as r,a,b as l,L as n,f as o,k as s,l as c,m,v as i,r as b,W as u,w as d,p as w,h as E}from"./prefetch.helper-4a4e89e7.js";import{f as p,h as g,u as h,C as k,B as f}from"./BEConfigProvider-697f66d7.js";import y from"./EditAgentDrawer-f784725c.js";import _ from"./NewAgentDrawer-64ac02a6.js";import v from"./EditServiceDrawer-f716db67.js";import N from"./NewServiceDrawer-076d60c7.js";import{B as C}from"./index-ad7a2af3.js";import{A as S,a as x}from"./AgentsList-cbd16b3a.js";import{T as P,P as j,a as F,b as B,D as I,B as T,c as A,C as R,d as M}from"./settings.constants-ecdbecc8.js";import{u as D}from"./store-87403b6b.js";import{W as U}from"./WeeklyScheduleEditor-df3fc586.js";import{E as z}from"./ErrorAlert-70706561.js";import{K as L,S as q,N as H}from"./ServiceFormDrawer-d3a386fe.js";import{S as V}from"./useServiceFormContext-e5a256c1.js";import{u as O,B as G}from"./useBreakpoint-2ef0bad1.js";import"./index-db6d4b60.js";import"./agent.helper-8c1fafa8.js";import"./AgentGeneralTab-62f9bb56.js";import"./phoneInput.helper-24509875.js";import"./index-f3d162c1.js";import"./AvatarPicker-e9de6b9b.js";import"./HiddenInput-2f0ce489.js";import"./AgentScheduleTab-f2a58cc2.js";import"./holiday.helper-ca9c72dc.js";import"./ServiceGeneralTab-52506f68.js";import"./color.helper-9b8c6bb8.js";import"./index-f9ec547e.js";import"./usePagination-047a16d8.js";import"./lodash-f550b173.js";import"./queue.helper-9ff85512.js";import"./UIComponents-1eb3bdbf.js";import"./ServiceCard-c25895f8.js";function W({children:t,header:r,footer:a}){return e.createElement(e.Fragment,null,e.createElement("div",{className:"bw-my-8 bw-text-center"},r),e.createElement("div",null,t),e.createElement("div",{className:"bw-my-8 bw-text-center"},a))}function $(){const l=t.useMutation({mutationKey:["skip-intro"],mutationFn:async()=>{await t.api.patch("settings/intro",{json:{skipped:!0}})},onSuccess:()=>{window.location.href=window.booksterMeta.wpPath.managerAppUrl}});return e.createElement(r.ReactPopover.Root,null,e.createElement(r.ReactPopover.Trigger,{asChild:!0},e.createElement(r.Button,{variant:"link",disabled:l.isLoading},"Skip Setup",l.isLoading?e.createElement(a.Loader2,{className:"bw-animate-spin"}):e.createElement(a.ArrowRight,null))),e.createElement(p,null,e.createElement("div",{className:"bw-flex bw-items-center bw-gap-2"},e.createElement(a.Info,{className:"bw-text-warning"}),e.createElement("span",null,"Are you sure?")),e.createElement(g,null,e.createElement(r.ReactPopover.Close,{asChild:!0},e.createElement(r.Button,{size:"small",variant:"trivial"},"No")),e.createElement(r.Button,{size:"small",onClick:()=>l.mutate()},"Yes"))))}function K(){const a=t.useNavigate();return e.createElement(W,{header:e.createElement(e.Fragment,null,e.createElement("h3",null,l.sprintf(l.__("Set up your %(agents)s","bookster"),n)),e.createElement("p",null,l.sprintf(l.__("Tell us about the %(agents)s working with you. Please add at least some %(agents)s.","bookster"),n))),footer:e.createElement($,null)},e.createElement(r.Card,null,e.createElement(r.CardHeader,{className:"bw-my-6 bw-flex bw-flex-row bw-items-center bw-justify-end bw-border-0 bw-border-b bw-border-solid bw-border-base-border bw-p-3 bw-pr-6"},e.createElement(r.Button,{onClick:()=>{a("new")}},l.sprintf(l.__("New %(agent)s","bookster"),n))),e.createElement(r.CardContent,null,e.createElement(S,null),e.createElement(x,null,e.createElement(t.Outlet,null))),e.createElement(r.CardFooter,{className:"bw-justify-center bw-border-0 bw-border-t bw-border-solid bw-border-base-border bw-py-3"},e.createElement(r.Button,{key:"continue",size:"large",onClick:function(){t.api.patch("settings/intro",{json:{completed:!0}}),a("/publish")}},"Continue"))))}function Y(){const{isLoading:a,generalSettings:n,paymentSettings:s}=D((e=>e.settings)),c=D((e=>e.settingsUpdateIntroGeneral)),m={general:n,payment:s},[i]=o.Form.useForm(),{toast:b}=r.useToast(),u=t.useNavigate();return e.createElement(W,{header:e.createElement(e.Fragment,null,e.createElement("h3",null,"Welcome to Bookster"),e.createElement("p",null,"Tell us about your business, configure the currency, phone code.")),footer:e.createElement($,null)},e.createElement(o.Form,{form:i,onFinish:async function(e){try{await c(e),b.success("General Settings has been Saved Successfully!"),u("/schedule")}catch(r){b.error(await t.getErrorMsg(r))}},initialValues:m,layout:"vertical"},e.createElement(r.Card,{className:"bw-mx-auto bw-max-w-screen-lg bw-pt-6"},e.createElement(r.CardContent,null,e.createElement("div",{className:"bw-grid bw-grid-cols-1 bw-gap-x-4 sm:bw-grid-cols-2"},e.createElement("div",null,e.createElement(o.Form.Item,{name:["general","time_slot_step"],rules:[{required:!0}],label:l.__("Default Time Slot Step","bookster"),help:"Interval between time slots in booking form, time picker and calendar.",trigger:"onValueChange"},e.createElement(P,null))),e.createElement("div",null,e.createElement(o.Form.Item,{name:["general","default_appointment_status"],rules:[{required:!0}],label:l.__("Default Appointment Status","bookster"),trigger:"onValueChange"},e.createElement(r.Select,null,e.createElement(r.SelectTrigger,null,e.createElement(r.SelectValue,null)),e.createElement(r.SelectContent,null,e.createElement(r.SelectGroup,null,e.createElement(r.SelectItem,{value:"pending"},l.__("Pending","bookster")),e.createElement(r.SelectItem,{value:"approved"},l.__("Approved","bookster"))))))),e.createElement("div",null,e.createElement(o.Form.Item,{name:["general","phone_country_code"],rules:[{required:!0}],label:l.__("Default Phone Country","bookster")},e.createElement(j,null))),e.createElement("div",null,e.createElement(o.Form.Item,{name:["general","items_per_page"],rules:[{required:!0}],label:l.__("Default Items Per Page","bookster"),help:"Apply to records pages.",trigger:"onValueChange"},e.createElement(F,null)))),e.createElement(r.SectionSeparator.Title,{className:"bw-my-6"},l.__("Formats","bookster")),e.createElement("div",{className:"bw-grid bw-grid-cols-1 bw-gap-x-4 sm:bw-grid-cols-2"},e.createElement("div",null,e.createElement(o.Form.Item,{name:["general","time_system"],rules:[{required:!0}],label:l.__("Time Format","bookster"),help:"How to display time in Bookster, also apply to time picker.",trigger:"onValueChange"},e.createElement(B,null))),e.createElement("div",null,e.createElement(o.Form.Item,{name:["general","date_format"],rules:[{required:!0}],label:l.__("Date Format","bookster"),help:"How to display date in Bookster.",trigger:"onValueChange"},e.createElement(I,null)))),e.createElement(r.SectionSeparator.Title,{className:"bw-my-6"},l.__("Restrictions","bookster")),e.createElement("div",{className:"bw-grid bw-grid-cols-1 bw-gap-x-4 sm:bw-grid-cols-2"},e.createElement("div",null,e.createElement(o.Form.Item,{name:["general","book_restriction_earliest"],rules:[{required:!0}],label:l.__("Earliest Possible Booking Time","bookster"),help:"Time Slots before this time will not be available for booking"},e.createElement(o.Cascader,{options:T,placeholder:l.__("Please select","bookster")}))),e.createElement("div",null,e.createElement(o.Form.Item,{name:["general","book_restriction_latest"],rules:[{required:!0}],label:l.__("Latest Possible Booking Time","bookster"),help:"Time Slots after this time will not be available for booking"},e.createElement(o.Cascader,{options:A,placeholder:l.__("Please select","bookster")})))),e.createElement(r.SectionSeparator.Title,{className:"bw-mb-6 bw-mt-2"},l.__("Currency Options","bookster")),e.createElement("div",{className:"bw-grid bw-grid-cols-1 bw-gap-x-4 sm:bw-grid-cols-2"},e.createElement(o.Form.Item,{name:["payment","currency"],label:l.__("Currency","bookster"),rules:[{required:!0,message:l.__("Please select currency!","bookster")}]},e.createElement(R,{onChange:e=>{const r=t.CURRENCY_OPTIONS.find((t=>t[0]===e));i.setFieldValue(["payment","currency_symbol"],r?r[2]:"$")}})),e.createElement(o.Form.Item,{name:["payment","currency_symbol"],hidden:!0,noStyle:!0},e.createElement("input",null)),e.createElement(M,null))),e.createElement(r.CardFooter,{className:"bw-justify-center bw-border-0 bw-border-t bw-border-solid bw-border-base-border bw-py-3"},e.createElement(r.Button,{key:"continue",size:"large",type:"submit",disabled:a},l.__("Continue","bookster"))))))}function J(){const{toast:t}=r.useToast();function o(e){navigator.clipboard.writeText(e),t.info("Shortcode has been copied!")}return e.createElement(W,{header:e.createElement(e.Fragment,null,e.createElement("h3",null,l.sprintf(l.__("Publish Bookster for your %(customer)s","bookster"),n)),e.createElement("p",null,"There are several action you could take to Publish the Booking features.")),footer:null},e.createElement(r.Card,{className:"bw-m-0 bw-mx-auto bw-max-w-screen-lg bw-pt-5"},e.createElement(r.CardContent,null,e.createElement(s,null,e.createElement(c,{className:"bw-text-success/80"},e.createElement(a.CheckCircle,{className:"bw-h-16 bw-w-16"})),e.createElement(m,null,"Here are some actions you could take to Publish Bookster.")),e.createElement("div",{className:"bw-m-3 bw-flex bw-flex-col"},e.createElement("div",{className:"bw-mb-3 bw-flex bw-items-center bw-border-0 bw-border-t bw-border-solid bw-border-base-border bw-pt-3"},e.createElement(i.Success,null,e.createElement(a.NotebookPen,{className:"bw-mx-5 bw-block bw-h-6 bw-w-6"})),e.createElement("div",{className:"bw-flex-grow"},e.createElement("h4",null,"Add a Booking Form Page"),e.createElement("p",{className:"bw-flex"},e.createElement(i.Secondary,null,"Using this Shortcode: "),e.createElement(r.Badge,{className:"bw-m-0 bw-cursor-pointer",variant:"outline",color:"info",onClick:()=>o("[bookster_booking_form]")},"[bookster_booking_form]"))),e.createElement("a",{href:`${window.booksterMeta.wpPath.adminUrl}/post-new.php?post_type=page&bookster_preset_page=booking-form&nonce=${window.booksterMeta.restPath.nonce}`,target:"_blank",rel:"noreferrer"},e.createElement(r.Button,{variant:"link"},"Add Now ",e.createElement(a.ArrowRight,null)))),e.createElement("div",{className:"bw-mb-3 bw-flex bw-items-center bw-border-0 bw-border-t bw-border-solid bw-border-base-border bw-pt-3"},e.createElement(i.Info,null,e.createElement(a.Contact,{className:"bw-mx-5 bw-block bw-h-6 bw-w-6"})),e.createElement("div",{className:"bw-flex-grow"},e.createElement("h4",null,l.sprintf(l.__("Edit %(customer)s Dashboard Page","bookster"),n)),e.createElement("p",{className:"bw-flex"},e.createElement(i.Secondary,null,"Using this Shortcode: "),e.createElement(r.Badge,{className:"bw-m-0 bw-cursor-pointer",variant:"outline",color:"info",onClick:()=>o("[bookster_customer_dashboard]")},"[bookster_customer_dashboard]"))),e.createElement("a",{href:`${window.booksterMeta.wpPath.adminUrl}post.php?post=${window.booksterManagerData.permissionsSettings.customer_dashboard_page_id}&action=edit`,target:"_blank",rel:"noreferrer"},e.createElement(r.Button,{variant:"link"},"Edit Now ",e.createElement(a.ArrowRight,null)))),e.createElement("div",{className:"bw-flex bw-items-center bw-border-0 bw-border-t bw-border-solid bw-border-base-border bw-pt-4"},e.createElement(i.Warning,null,e.createElement(a.Blocks,{className:"bw-mx-5 bw-block bw-h-6 bw-w-6"})),e.createElement("div",{className:"bw-flex-grow"},e.createElement("h4",null,"Customize your Site, Home Page, Menu, etc."),e.createElement(i.Secondary,null,"Adding the Bookster Page and Shortcode to your Site.")),e.createElement("a",{href:`${window.booksterMeta.wpPath.adminUrl}/themes.php`,target:"_blank",rel:"noreferrer"},e.createElement(r.Button,{variant:"link"},"Edit Now ",e.createElement(a.ArrowRight,null)))))),e.createElement(r.CardFooter,{className:"bw-justify-center bw-gap-3 bw-border-0 bw-border-t bw-border-solid bw-border-base-border bw-py-3"},e.createElement("a",{href:window.booksterMeta.wpPath.managerAppUrl,target:"_blank",rel:"noreferrer"},e.createElement(r.Button,{size:"large"},"To Bookster")),e.createElement("a",{href:window.booksterMeta.wpPath.adminUrl,target:"_blank",rel:"noreferrer"},e.createElement(r.Button,{variant:"trivial",size:"large"},"Back to WordPress")))))}function Q(){const[a,l]=b.useState(null),{isLoading:n,scheduleSettings:s}=D((e=>e.settings)),c=D((e=>e.settingsUpdateSchedule)),[m]=o.Form.useForm(),{toast:i}=r.useToast(),w=t.useNavigate();return e.createElement(W,{header:e.createElement(e.Fragment,null,e.createElement("h3",null,"The Working Schedule for your Business"),e.createElement("p",null,"Please add at least a work day and a work period.")),footer:e.createElement($,null)},e.createElement(o.Form,{form:m,onFinish:async function(e){if(e.schedule.weekly=d(e.schedule.weekly),!Object.values(e.schedule.weekly).some((e=>0!==e.periods.length)))return void l("Please add at least a work day and a work period!");const r={...s,...e};try{await c(r),i.success("Schedule Settings has been Saved Successfully!"),w("/services/list")}catch(a){i.error(await t.getErrorMsg(a))}},initialValues:{schedule:s},layout:"vertical"},e.createElement(r.Card,{className:"bw-mx-auto bw-max-w-screen-lg bw-pt-6"},e.createElement(r.CardContent,null,a&&e.createElement(z,null,a),e.createElement(U,{formNamePrefix:["schedule","weekly"],defaultActivePanelKeys:[u.Monday]})),e.createElement(r.CardFooter,{className:"bw-justify-center bw-border-0 bw-border-t bw-border-solid bw-border-base-border bw-py-3"},e.createElement(r.Button,{key:"continue",size:"large",type:"submit",disabled:n},"Continue")))))}function X(){const a=D((e=>e.newServiceNestedCategory)),s=h(),c=t.useNavigate(),[m]=o.Form.useForm();return e.createElement(W,{header:e.createElement(e.Fragment,null,e.createElement("h3",null,l.sprintf(l.__("Set up your %(services)s","bookster"),n)),e.createElement("p",null,l.sprintf(l.__("Tell us about the %(services)s that your business provides. Please add at least some","bookster"),n))),footer:e.createElement($,null)},e.createElement(r.Card,{className:"bw-mt-6"},e.createElement(r.CardHeader,{className:"bw-flex bw-flex-row bw-items-center bw-justify-end bw-gap-2 bw-space-y-0 bw-border-0 bw-border-b bw-border-solid bw-border-base-border bw-p-3 bw-pr-6"},e.createElement(r.Button,{variant:"trivial",onClick:()=>a()},"New Category"),e.createElement(r.Button,{onClick:()=>{s("new")}},l.sprintf(l.__("New %(service)s","bookster"),n))),e.createElement(r.CardContent,{className:"bw-p-0"},e.createElement(L,null),e.createElement(V.Provider,{value:{form:m}},e.createElement(q,null,e.createElement(t.Outlet,null)),e.createElement(H,null))),e.createElement(r.CardFooter,{className:"bw-justify-center bw-border-0 bw-border-t bw-border-solid bw-border-base-border bw-py-3"},e.createElement(r.Button,{key:"continue",size:"large",onClick:function(){c("/agents")}},"Continue"))))}const Z=[{key:"general",icon:e.createElement(a.Settings,{className:"bw-h-5 bw-w-5"}),title:"General Settings"},{key:"schedule",title:"Schedule Settings",icon:e.createElement(a.Clock,{className:"bw-h-5 bw-w-5"})},{key:"services",title:n.services,icon:e.createElement(a.Album,{className:"bw-h-5 bw-w-5"})},{key:"agents",title:n.agents,icon:e.createElement(a.UsersRound,{className:"bw-h-5 bw-w-5"})},{key:"publish",title:"Publish",icon:e.createElement(a.Rocket,{className:"bw-h-5 bw-w-5"})}];function ee(){const r=O(G.md),a=t.useMatch("/:stepId/*"),l=function(e){const t=Z.findIndex((t=>t.key===e));return-1===t?0:t}(null==a?void 0:a.params.stepId);return e.createElement(e.Fragment,null,r?e.createElement(o.Steps,{items:te,current:l}):e.createElement(e.Fragment,null,e.createElement(i.Primary,{className:"bw-mr-2 bw-text-2xl"},Z[l].icon),Z[l].title))}const te=Z.map((e=>({key:e.key,title:e.title}))),{Content:re,Header:ae}=o.Layout;function le(){return e.createElement(o.Layout,{className:"bw-min-h-screen bw-w-screen"},e.createElement(ae,{className:"bw-sticky bw-top-0 bw-z-10 bw-flex bw-w-full bw-items-center bw-justify-center bw-border-0 bw-border-b bw-border-solid bw-border-base-border bw-bg-base-bg1 bw-px-6 bw-text-lg"},e.createElement(ee,null)),e.createElement(re,{className:"bw-bg-base-bg2 bw-px-12"},e.createElement(t.Outlet,null)),e.createElement(r.Toaster,null))}w(),E.createRoot(document.getElementById("bookster-intro")).render(e.createElement(e.StrictMode,null,e.createElement(f,null,e.createElement(t.RouterProvider,{router:t.createHashRouter([{path:"*",element:e.createElement(le,null),errorElement:e.createElement(C,null),children:[{index:!0,element:e.createElement(Y,null)},{path:"schedule",element:e.createElement(Q,null)},{path:"services/list",element:e.createElement(X,null),children:[{index:!0,element:e.createElement(k,null)},{path:"new",element:e.createElement(N,null)},{path:":serviceId",element:e.createElement(v,null)}]},{path:"agents",element:e.createElement(K,null),children:[{index:!0,element:e.createElement(k,null)},{path:"new",element:e.createElement(_,null)},{path:":agentId",element:e.createElement(y,null)}]},{path:"publish",element:e.createElement(J,null)}]}])}))));
