import{r as e,c as t,R as a,_ as n,a as l,L as r,b as s}from"./prefetch.helper-4a4e89e7.js";function m({className:m,...o}){const[c,b]=e.useState(!1),w=t.useActiveAgents(),[i,u]=t.useSearchParams(),d=i.get("agent"),g=(d?d.split(","):[]).map((e=>parseInt(e,10))),p=e.useMemo((()=>{if(0===g.length)return null;const e=w.find((e=>e.agent_id===g[0]));return e?a.createElement(a.Fragment,null,a.createElement(n.Separator,{orientation:"vertical"}),a.createElement("div",{className:"bw-flex bw-items-center bw-gap-1.5"},a.createElement(n.Avatar,{className:"bw-h-5 bw-w-5"},a.createElement(n.AvatarImage,{src:e.transient_avatar_url}),a.createElement(n.AvatarFallback,{className:"bw-text-xs"},a.createElement(l.UserRound,{className:"bw-h-3 bw-w-3"}))),a.createElement("span",null,`${e.first_name} ${e.last_name}`)),g.length>1&&a.createElement("span",null,"+",g.length-1)):null}),[g,w]);return a.createElement(n.Popover,{open:c,onOpenChange:b},a.createElement(n.ComboboxTrigger,{withStatus:!1,className:n.clsx("bw-w-auto bw-gap-1 bw-rounded-full bw-border-dashed bw-bg-base-bg1 bw-pe-2 bw-ps-2 bw-text-sm",m),...o},a.createElement(l.PlusCircle,{className:"h-2 w-2 bw-text-base-foreground/60"}),a.createElement("span",{className:"bw-text-base-foreground/60"},r.agent),p),a.createElement(n.PopoverPortal,null,a.createElement(n.PopoverContent,{className:"bw-w-[20rem] bw-p-0 bw-shadow-md",side:"bottom",align:"start"},a.createElement(n.Command,{loop:!0},a.createElement(n.CommandInput,{placeholder:r.agent}),a.createElement(n.CommandList,null,a.createElement(n.CommandEmpty,null,s.sprintf(s.__("No %(agents)s found.","bookster"),r)),a.createElement(n.CommandGroup,null,w.map((e=>a.createElement(n.CommandItem,{key:e.agent_id,value:`${e.agent_id}`,keywords:[e.first_name,e.last_name,e.email,e.phone],onSelect:()=>(e=>{if(g.includes(e)){const t=g.filter((t=>t!==e));u((e=>(e.set("agent",t.join(",")),e)))}else u((t=>(t.set("agent",[...g,e].join(",")),t)))})(e.agent_id)},a.createElement(n.ComboboxItemIcon,{isActive:g.includes(e.agent_id)}),a.createElement("div",{className:"bw-flex bw-items-center bw-gap-1.5"},a.createElement(n.Avatar,{className:"bw-h-5 bw-w-5"},a.createElement(n.AvatarImage,{src:e.transient_avatar_url}),a.createElement(n.AvatarFallback,{className:"bw-text-xs"},a.createElement(l.UserRound,{className:"bw-h-3 bw-w-3"}))),a.createElement("span",null,`${e.first_name} ${e.last_name}`)))))),g.length>0&&a.createElement(a.Fragment,null,a.createElement(n.CommandSeparator,{alwaysRender:!0}),a.createElement(n.CommandGroup,{forceMount:!0},a.createElement(n.CommandItem,{forceMount:!0,onSelect:()=>{u((e=>(e.delete("agent"),e)))},className:"bw-justify-center bw-py-2 bw-font-medium bw-text-base-foreground/60"},s.__("Clear Filter","bookster")))))))))}export{m as A};
