import{c as t,w as e,e as s,i as a}from"./prefetch.helper-4a4e89e7.js";import{g as n,i,j as o,c as r}from"./BEConfigProvider-697f66d7.js";import{a as c}from"./holiday.helper-ca9c72dc.js";async function g(e){return await t.api.patch("agents/query",{json:e}).json()}async function p(e){return await t.api.get(`agents/${e}`).json()}async function d(e){return await t.api.post("agents",{json:e}).json()}async function y(e,s){return await t.api.patch(`agents/${e}`,{json:s}).json()}async function u(e,s){return await t.api.patch(`agents/${e}/link-wp-user`,{json:{email:s}}).json()}async function l(e){return await t.api.patch(`agents/${e}`,{json:{wp_user_id:null}}).json()}async function w(e){return await t.api.delete(`agents/${e}`).json()}async function m(e){if(0!==await t.api.patch("agents/count",{json:{email:e}}).json())throw new Error("Agent with this email already exists!")}async function h(e){return await t.api.patch("appointments/query",{json:e}).json()}async function f(e){return await t.api.patch("appointments/count",{json:e}).json()}async function j(){return await t.api.patch("appointments/counter").json()}async function v(e){return await t.api.get(`appointments/${e}`).json()}async function S(e){return await t.api.get(`appointments/${e}/details`).json()}async function b(e){return await t.api.post("appointments",{json:e}).json()}async function D(e,s){return await t.api.patch(`appointments/${e}/bookings`,{json:s}).json()}async function P(e,s){return await t.api.patch(`appointments/${e}`,{json:s}).json()}async function $(e){return await t.api.delete(`appointments/${e}`).json()}async function k(t,e){return P(t,{book_status:e})}async function L(e){return await t.api.patch(`appointments/${e}/resend-email-to-customer`).json()}async function M(e){return await t.api.patch(`appointments/${e}/resend-email-to-agent`).json()}async function C(e){return await t.api.patch("services/query",{json:e}).json()}async function U(e){return await t.api.get(`services/${e}`).json()}async function O(e){return await t.api.post("services",{json:e}).json()}async function _(e,s){return await t.api.patch(`services/${e}`,{json:s}).json()}async function x(e,s,a){return await t.api.patch(`services/${e}/update_position`,{json:{service_category_id:s,position:a}}).json()}async function z(e){return await t.api.delete(`services/${e}`).json()}const E=(t,e)=>({services:{form:{presetValues:void 0,nestedCategory:["close"]},categoryForm:{isOpen:!1},serviceForm:{isOpen:!1}},initServiceForm:e=>{t((t=>{t.services.form.presetValues=e,t.services.form.nestedCategory=["close"]}))},resetServiceForm:()=>{t((t=>{t.services.form.presetValues=void 0,t.services.form.nestedCategory=["close"]}))},newServiceNestedCategory:()=>{t((t=>{t.services.form.nestedCategory=["new"]}))},editServiceNestedCategory:e=>{t((t=>{t.services.form.nestedCategory=["edit",e]}))},closeServiceNestedCategory:()=>{t((t=>{t.services.form.nestedCategory=["close"]}))}}),F=(s,a)=>({settings:{generalSettings:window.booksterManagerData.generalSettings,scheduleSettings:window.booksterManagerData.scheduleSettings,holidaysSettings:window.booksterManagerData.holidaysSettings,permissionsSettings:window.booksterManagerData.permissionsSettings,paymentSettings:window.booksterManagerData.paymentSettings,isLoading:!1},settingsUpdateIntroGeneral:async e=>{try{s((t=>{t.settings.isLoading=!0}));const n=a().settings,i={...n.generalSettings,...e.general},o={...n.paymentSettings,...e.payment};await Promise.all([t.api.patch("settings/general",{json:{general:i}}),t.api.patch("settings/payment",{json:{payment:o}})]),s((t=>{t.settings.generalSettings=i,t.settings.paymentSettings=o})),q({generalSettings:i,paymentSettings:o})}finally{s((t=>{t.settings.isLoading=!1}))}},settingsUpdateGeneral:async e=>{try{s((t=>{t.settings.isLoading=!0})),await t.api.patch("settings/general",{json:e}),s((t=>{t.settings.generalSettings={...t.settings.generalSettings,...e.general}})),q({generalSettings:e.general})}finally{s((t=>{t.settings.isLoading=!1}))}},settingsUpdateSchedule:async a=>{try{a.schedule.weekly=e(a.schedule.weekly),s((t=>{t.settings.isLoading=!0})),await t.api.patch("settings/schedule",{json:a}),s((t=>{t.settings.scheduleSettings={...t.settings.scheduleSettings,...a.schedule}})),q({scheduleSettings:a.schedule})}finally{s((t=>{t.settings.isLoading=!1}))}},settingsUpdateHoliday:async e=>{const n=a().settings.holidaysSettings,i=c(e,n);await t.api.patch("settings/holidays",{json:{holidays:i}}),s((t=>{t.settings.holidaysSettings=i})),q({holidaysSettings:i})},settingsUpdatePermissions:async e=>{try{s((t=>{t.settings.isLoading=!0})),await t.api.patch("settings/permissions",{json:e}),s((t=>{t.settings.permissionsSettings={...t.settings.permissionsSettings,...e.permissions}})),q({permissionsSettings:e.permissions})}finally{s((t=>{t.settings.isLoading=!1}))}},settingsUpdatePayment:async e=>{try{s((t=>{t.settings.isLoading=!0})),await t.api.patch("settings/payment",{json:e}),s((t=>{t.settings.paymentSettings={...t.settings.paymentSettings,...e.payment}})),function(t){const e={...t,paymentSettings:t.payment};delete e.payment,q(e)}(e)}finally{s((t=>{t.settings.isLoading=!1}))}},settingsUpdateCustomize:async e=>{try{s((t=>{t.settings.isLoading=!0})),await t.api.patch("settings/customize",{json:e}),q({customizeSettings:e.customize})}finally{s((t=>{t.settings.isLoading=!1}))}}});function q(t){Object.assign(window.booksterManagerData,t),Object.assign(window.booksterPublicData,t)}let N;function R(e,c){return N||(N=t.createStore()(t.immer(t.devtools(((...t)=>{const e=s.dayjs(),c=e.add(1,"day"),g=e.utc(!0).startOf("day").toDate(),p=c.utc(!0).startOf("day").toDate(),d=n().calendarViewManager,y=a(d),u=r(y),l=(w={title:e.format("MMMM D, YYYY"),activeStart:g,activeEnd:p},(t,e)=>({dashboard:{dayPreview:w},dashboardDayPreviewRefresh(e){t((t=>{t.dashboard.dayPreview.title=e.view.title,t.dashboard.dayPreview.activeStart=e.view.activeStart,t.dashboard.dayPreview.activeEnd=e.view.activeEnd}))},dashboardDayPreviewNext(t){t.next(),e().dashboardDayPreviewRefresh(t)},dashboardDayPreviewPrev(t){t.prev(),e().dashboardDayPreviewRefresh(t)},dashboardDayPreviewToday(t){t.today(),e().dashboardDayPreviewRefresh(t)}}));var w;const m=i({hidden:n().columnsForManager.hidden,order:o()});return{...l(...t),...u(...t),...m(...t),...E(...t),...F(...t)}}))))),t.useStore(N,e,c)}export{x as A,C as a,S as b,M as c,D as d,$ as e,b as f,v as g,P as h,h as i,k as j,j as k,d as l,f as m,y as n,w as o,p,g as q,L as r,u as s,l as t,R as u,m as v,O as w,_ as x,z as y,U as z};
