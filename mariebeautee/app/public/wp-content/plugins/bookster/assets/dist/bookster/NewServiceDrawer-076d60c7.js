import{_ as e,c as t,r as a,d as r,R as s,b as l,L as n,f as i}from"./prefetch.helper-4a4e89e7.js";import{u as o,w as c}from"./store-87403b6b.js";import{u as m}from"./BEConfigProvider-697f66d7.js";import{u}from"./useServiceFormContext-e5a256c1.js";import{g as b,S as v,a as d,p as E}from"./ServiceGeneralTab-52506f68.js";import"./holiday.helper-ca9c72dc.js";import"./color.helper-9b8c6bb8.js";function f(){const{presetValues:f}=o((e=>e.services.form)),g=o((e=>e.resetServiceForm)),{toast:p}=e.useToast(),y=m(),{form:w}=u(),_=t.useQueryClient(),F=t.useMutation({mutationKey:["services","new"],mutationFn:c,onSuccess:e=>{_.setQueryData(["service",e.service_id],e),_.invalidateQueries({queryKey:["services"]})}}),k=t.useActiveAgents(),T=a.useMemo((()=>{let e=b(k);return f&&(e={...e,...f}),r.booksterHooks.applyFilters(r.HOOK_NAMES.adminServiceForm.initFormValues,e,void 0)}),[f,k]);return a.useEffect((()=>{w.resetFields(),w.setFieldsValue(T)}),[T]),s.createElement(s.Fragment,null,s.createElement(e.DrawerHeader,null,s.createElement(e.DrawerTitle,null,l.sprintf(l.__("New %(service)s","bookster"),n)),s.createElement(e.DrawerCloseIcon,null)),s.createElement(e.DrawerBody,null,s.createElement(e.LoadingOverlay,{loading:F.isLoading}),s.createElement(i.Form,{form:w,initialValues:T,disabled:F.isLoading,layout:"vertical",scrollToFirstError:!0,onFinish:e=>{!async function(e){try{const t=E(e);await F.mutateAsync(t),l.sprintf(l.__("%(service)s has been Saved Successfully!","bookster"),n),y(".."),g()}catch(a){p.error(await t.getErrorMsg(a))}}(e)}},s.createElement(e.TabsRoot,{defaultValue:"general"},s.createElement(e.TabsList,{"aria-label":"tabs settings"},s.createElement(e.LineTabsTrigger,{value:"general"},l.__("General","bookster")),s.createElement(e.LineTabsTrigger,{value:"available"},l.__("Available","bookster"))),s.createElement(e.TabsContent,{value:"general"},s.createElement(v,null)),s.createElement(e.TabsContent,{value:"available"},s.createElement(d,null))),s.createElement("button",{type:"submit",className:"bw-hidden"}))),s.createElement(e.DrawerFooter,null,s.createElement(e.DrawerClose,{asChild:!0},s.createElement(e.Button,{key:"back",tabIndex:-1,variant:"trivial",className:"bw-min-w-[8rem]"},l.__("Cancel","bookster"))),s.createElement(e.Button,{key:"submit",disabled:F.isLoading,className:"bw-min-w-[8rem]",onClick:()=>w.submit()},l.__("Save","bookster"))))}export{f as default};
