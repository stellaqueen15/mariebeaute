import{c as e,r as s}from"./prefetch.helper-4a4e89e7.js";import{i as t}from"./store-87403b6b.js";import{g as r,e as a}from"./CalendarNav.styled-1832bdf1.js";function n(s){return e.useQuery({queryKey:["appointments","events",s],queryFn:async()=>(await t(s)).data.map((e=>({id:e.appointment_id.toString(),title:e.service.name,start:e.busy_datetime_start,end:e.busy_datetime_end,resourceIds:e.agent_ids.map((e=>e.toString())),model:e})))})}function o(){const t=e.useActiveAgents(),n=s.useMemo((()=>t.map((e=>{const s=e.weekly_schedule_enabled&&e.weekly_schedule?r(e.weekly_schedule).businessHours:[];return{id:e.agent_id.toString(),title:e.first_name+" "+e.last_name,businessHours:!!(s&&s.length>0)&&s,model:e}}))),[t]),{slotMinAbs:o,slotMaxAbs:i}=s.useMemo((()=>{let e=a.slotMinAbs,s=a.slotMaxAbs;return n.forEach((t=>{t.businessHours&&t.businessHours.forEach((t=>{Array.isArray(t)&&t.forEach((t=>{t.startAbsMinute<e&&(e=t.startAbsMinute),t.endAbsMinute>s&&(s=t.endAbsMinute)}))}))})),{slotMinAbs:60*Math.floor(e/60),slotMaxAbs:60*Math.ceil(s/60)}}),[n]);return{resources:n,slotMinAbs:o,slotMaxAbs:i}}export{n as a,o as u};
