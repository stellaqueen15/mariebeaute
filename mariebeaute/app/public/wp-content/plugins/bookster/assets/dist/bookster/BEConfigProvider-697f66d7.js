import{R as e,_ as t,b as n,u as r,c as o,d as a,f as s,r as i,x as l}from"./prefetch.helper-4a4e89e7.js";function c(){return e.createElement(e.Fragment,null,e.createElement(t.DrawerHeader,null,e.createElement(t.DrawerTitle,null,n.__("Closing","bookster")),e.createElement(t.DrawerCloseIcon,null)),e.createElement(t.DrawerBody,null),e.createElement(t.DrawerFooter,null,e.createElement(t.DrawerClose,{asChild:!0},e.createElement(t.Button,{key:"back",tabIndex:-1,variant:"trivial",className:"bw-min-w-[8rem]"},n.__("Cancel","bookster"))),e.createElement(t.Button,{key:"submit",className:"bw-min-w-[8rem]"},n.__("Save","bookster"))))}function m(e){return function(){const e=r.getState().wpUserInfo;return e.isLoggedIn?e.caps:[]}().includes(e)}const p={writeAppt:window.booksterPublicData.permissionsSettings.agents_allow_edit_appointment,writeSchedule:window.booksterPublicData.permissionsSettings.agents_allow_edit_settings},u={pageSider:!0,testEmail:void 0!==window.booksterMeta.auth.wpUserInfo.email?window.booksterMeta.auth.wpUserInfo.email:"",calendarViewAgent:"timeGridWeek",calendarViewManager:"resourceTimelineDay",columnsForManager:{hidden:[],order:[]},columnsForAgent:{hidden:[],order:[]}},d="booksterLocalData";let f;function w(e=!1){if(f&&!e)return f;const t=localStorage.getItem(d);return t?(f=h(u,JSON.parse(t)),f):u}function g(e){const t=h(w(),e);f=t,localStorage.setItem(d,JSON.stringify(t))}function h(e,t){return Object.assign({},e,t)}function v(){const[e]=o.useSearchParams(),t=o.useNavigate();return function(n){t({pathname:n,search:e.toString()})}}function C(){const e=a.booksterHooks.applyFilters(a.HOOK_NAMES.managerApptList.apptColumns,["book_time","service","customer","agent","status","payment","total"]);let t=w().columnsForManager.order;return e.forEach(((e,n)=>{t.includes(e)||t.splice(n,0,e)})),t=t.filter((t=>e.includes(t))),t}function b(){const e=a.booksterHooks.applyFilters(a.HOOK_NAMES.agentApptList.apptColumns,["book_time","service","customer","status","payment","total"]);let t=w().columnsForAgent.order;return e.forEach(((e,n)=>{t.includes(e)||t.splice(n,0,e)})),t=t.filter((t=>e.includes(t))),t}function E(e,t,n){if(t===n||t<0||n<0||t>=e.length||n>=e.length)return e;const r=e.slice();return r.splice(n,0,r.splice(t,1)[0]),r}function A(e){return(t,n)=>({appointments:{form:{presetValues:void 0,nestedCustomer:["close"]},ui:e},initAppointmentForm:e=>{t((t=>{t.appointments.form.presetValues=e,t.appointments.form.nestedCustomer=["close"]}))},resetAppointmentForm:()=>{t((e=>{e.appointments.form.presetValues=void 0,e.appointments.form.nestedCustomer=["close"]}))},newAppointmentNestedCustomer:()=>{t((e=>{e.appointments.form.nestedCustomer=["new"]}))},editAppointmentNestedCustomer:e=>{t((t=>{t.appointments.form.nestedCustomer=["edit",e]}))},closeAppointmentNestedCustomer:()=>{t((e=>{e.appointments.form.nestedCustomer=["close"]}))},showAppointmentColumn:e=>{const r=n().appointments.ui.hidden.indexOf(e);-1!==r&&t((e=>{e.appointments.ui.hidden.splice(r,1)}))},hideAppointmentColumn:e=>{-1===n().appointments.ui.hidden.indexOf(e)&&t((t=>{t.appointments.ui.hidden.push(e)}))},moveAppointmentColumnUp:e=>{const r=n().appointments.ui.order,o=r.indexOf(e);-1!==o&&t((e=>{e.appointments.ui.order=E(r,o,o-1)}))},moveAppointmentColumnDown:e=>{const r=n().appointments.ui.order,o=r.indexOf(e);-1!==o&&t((e=>{e.appointments.ui.order=E(r,o,o+1)}))},persistAppointmentColsForManager:()=>{g({columnsForManager:n().appointments.ui})},persistAppointmentColsForAgent:()=>{g({columnsForAgent:n().appointments.ui})}})}function y(e){return(t,n)=>({calendar:{view:e},calendarRefresh(e){t((t=>{t.calendar.view.type=e.view.type,t.calendar.view.title=e.view.title,t.calendar.view.activeStart=e.view.activeStart,t.calendar.view.activeEnd=e.view.activeEnd}))},calendarNext(e){e.next(),n().calendarRefresh(e)},calendarPrev(e){e.prev(),n().calendarRefresh(e)},calendarToday(e){e.today(),n().calendarRefresh(e)},calendarChangeView(e,t){e.batchRendering((()=>{e.changeView(t),e.setOption("editable","resourceTimelineDay"===t||"timeGridWeek"===t)})),n().calendarRefresh(e)}})}function k({value:t,onChange:n,...r}){const a=t??0;return e.createElement(s.InputNumber,{precision:o.NUMBER_OF_DECIMALS,decimalSeparator:o.DECIMAL_SEPARATOR,min:0,step:5,value:a,onChange:e=>{n&&n(e)},...r})}const S=t.stylex.div("bw-mt-3 bw-flex bw-flex-row bw-justify-end bw-gap-2"),_=i.forwardRef((({className:n,children:r,sideOffset:o=6,...a},s)=>e.createElement(t.PopoverPortal,null,e.createElement(t.PopoverContent,{className:t.clsx("bw-text-sm",n),sideOffset:o,...a,ref:s},r,e.createElement(t.ReactPopover.Arrow,{fill:"white",stroke:"#d1d5db"})))));function O({children:n}){return e.createElement(s.ConfigProvider,{...l},e.createElement(s.StyleProvider,{hashPriority:"high"},e.createElement(t.ReactTooltip.Provider,{delayDuration:150},e.createElement(o.QueryClientProvider,{client:o.queryClient},n))))}o.queryClient.setDefaultOptions({queries:{retry:0,staleTime:9e5,onError:async e=>{t.toast.error(await o.getErrorMsg(e))}},mutations:{}});export{k as A,O as B,c as C,m as a,b,y as c,p as d,g as e,_ as f,w as g,S as h,A as i,C as j,v as u};
