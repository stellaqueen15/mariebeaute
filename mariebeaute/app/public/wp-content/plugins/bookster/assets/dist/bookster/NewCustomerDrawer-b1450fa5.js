import{_ as e,f as t,c as r,R as s,b as a,L as o}from"./prefetch.helper-4a4e89e7.js";import{n,v as i}from"./DeleteAppointmentButton-e4b7a1de.js";import{u as m}from"./BEConfigProvider-697f66d7.js";import{D as l}from"./customer.helper-d5537c29.js";import{C as u}from"./CustomerFormContent-cbddc6fa.js";import"./createBookTimeInput.helper-a66a36a8.js";import"./useBreakpoint-2ef0bad1.js";import"./index-f9ec547e.js";import"./useEffectWithTarget-688d6bb0.js";import"./index-ad7a2af3.js";import"./appointment.helper-80ab8c9c.js";import"./phoneInput.helper-24509875.js";import"./index-f3d162c1.js";import"./AvatarPicker-e9de6b9b.js";import"./HiddenInput-2f0ce489.js";function c(){const{toast:c}=e.useToast(),p=m(),[d]=t.Form.useForm(),f=r.useQueryClient(),j=r.useMutation({mutationKey:["customers","new"],mutationFn:n,onSuccess:e=>{f.setQueryData(["customer",e.customer_id],e),f.invalidateQueries({queryKey:["customers"]})}}),E=l;return s.createElement(s.Fragment,null,s.createElement(e.DrawerHeader,null,s.createElement(e.DrawerTitle,null,a.sprintf(a.__("New %(customer)s ","bookster"),o)),s.createElement(e.DrawerCloseIcon,null)),s.createElement(e.DrawerBody,null,s.createElement(e.LoadingOverlay,{loading:j.isLoading}),s.createElement(t.Form,{form:d,initialValues:E,disabled:j.isLoading,layout:"vertical",scrollToFirstError:!0,onFinish:e=>{!async function(e){try{await i(e.email),await j.mutateAsync(e),c.success(a.sprintf(a.__("%(customer)s has been Saved Successfully!","bookster"),o)),p("..")}catch(t){c.error(await r.getErrorMsg(t))}}(e)}},s.createElement(u,null))),s.createElement(e.DrawerFooter,null,s.createElement(e.DrawerClose,{asChild:!0},s.createElement(e.Button,{key:"back",tabIndex:-1,variant:"trivial",className:"bw-min-w-[8rem]"},a.__("Cancel","bookster"))),s.createElement(e.Button,{key:"submit",disabled:j.isLoading,className:"bw-min-w-[8rem]",onClick:()=>d.submit()},a.__("Save","bookster"))))}export{c as default};
