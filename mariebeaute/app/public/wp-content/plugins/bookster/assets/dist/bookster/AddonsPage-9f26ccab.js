import{c as e,_ as t,R as a}from"./prefetch.helper-4a4e89e7.js";import{P as n,a as s}from"./UIComponents-1eb3bdbf.js";function o({addon:n,metadata:s,className:o,...r}){const{toast:l}=t.useToast(),i=(null==s?void 0:s.link)||"https://wpbookster.com/",c=(null==s?void 0:s.releaseStatus)||n.releaseStatus,d=e.useMutation({mutationFn:async t=>{await async function(t){return await e.api.patch("addon/activate",{json:{slug:t}})}(t)}});return a.createElement(t.Card,{className:t.cx("bw-flex bw-flex-col bw-items-stretch bw-overflow-hidden bw-bg-base-bg1 bw-transition-shadow bw-duration-300 hover:bw-shadow-lg",o),...r},a.createElement("img",{className:"bw-aspect-[16/6] bw-object-cover",alt:n.title,src:n.cover}),a.createElement(t.CardHeader,{className:"bw-flex-grow bw-p-5"},a.createElement(t.CardTitle,{className:"bw-mb-2 bw-flex bw-items-center bw-justify-between bw-text-lg bw-text-base-foreground"},n.title),a.createElement(t.CardDescription,{className:"bw-inline-flex bw-gap-2"},n.tags.map((e=>a.createElement(t.Badge,{variant:"fill",color:"muted",className:"bw-font-medium",key:e},e)))),a.createElement(t.CardDescription,{className:"bw-text-base"},n.description)),a.createElement(t.CardFooter,{className:"bw-justify-center bw-border-0 bw-border-t bw-border-solid bw-border-base-border bw-py-2 bw-text-center"},"not_installed"===n.installStatus&&a.createElement(t.Button,{variant:"link",color:"coming_soon"===c?"base":"info",asChild:!0},a.createElement("a",{href:i,target:"_blank"},"released"===c&&"Install Now","coming_soon"===c&&"Coming soon")),"installed"===n.installStatus&&a.createElement(t.Button,{variant:"link",className:d.isLoading?"bw-cursor-not-allowed":"",onClick:()=>async function(){if(!d.isLoading)try{await d.mutateAsync(n.slug),window.location.reload()}catch(t){l.error(await e.getErrorMsg(t))}}()},d.isLoading?"Activating...":"Activate Now"),"activated"===n.installStatus&&a.createElement(t.Button,{variant:"link",color:"success"},"Activated")))}const r=window.booksterAddons.addonInfos;function l(){const{data:t}=e.useQuery({queryKey:["addons","metadata"],queryFn:async()=>(await fetch("https://wpbookster.vercel.app/addons/metadata.json")).json()});return a.createElement(n,null,a.createElement(s.Standalone,null,"Addons"),a.createElement("div",{className:"bw-grid bw-auto-rows-fr bw-grid-cols-[repeat(auto-fill,minmax(18rem,1fr))] bw-gap-5"},r.map((function(e){const n=null==t?void 0:t.find((t=>t.slug===e.slug));return a.createElement(o,{addon:e,key:e.slug,metadata:n})}))))}export{l as default};
