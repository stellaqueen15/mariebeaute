import{_ as t,s as e,e as s,q as a,d as o}from"./prefetch.helper-4a4e89e7.js";import{c as i}from"./createBookTimeInput.helper-a66a36a8.js";const n=t.styled.div("bw-mb-4 bw-ml-4 bw-py-2 bw-text-md bw-text-warning"),r={booking:{items:[],subtotal:e.ZERO},adjustment:{items:[],subtotal:e.ZERO},tax:{items:[],total:e.ZERO}},l={status:"incomplete",paid:e.ZERO};function u(t,o,i){let n;if(o.booking_details)n=a.parseDetails(o.booking_details);else{const t=a.makeBlueprintBookingVer1_0(i,o.total_amount);n=a.calculateDetails(t)}return{...t,start_time:a.Helper.booktime.createFromAbsMinute(t.abs_min_start||0),end_time:a.Helper.booktime.createFromAbsMinute(t.abs_min_end||0),book_date:s.dayjs(t.datetime_start),details:n,customer_ids:[o.customer_id],customer_note:o.customer_note,payment:{status:o.payment_status,paid:e.Decimal.fromString(o.paid_amount)}}}function _(t){if(null===t.book_date||null===t.start_time||null===t.end_time)throw new Error("Invalid Appointment Values");const e=i(t.book_date,t.start_time,t.end_time,t.buffer_before||0,t.buffer_after||0);return{service_id:t.service_id,agent_ids:t.agent_ids,book_status:t.book_status,...e,staff_note:t.staff_note}}function m(t){var s;const o=function(t){if(null===t.details.booking||null===t.details.adjustment||null===t.details.tax)throw new Error("Invalid Details Values");return a.serializeDetails(t.details)}(t),i=(null==(s=t.details.tax)?void 0:s.total)||e.ZERO,n=a.serializePayment(t.payment,i);return{customer_id:t.customer_ids[0],booking_details:o,customer_note:t.customer_note,payment_status:n.status,total_amount:i.toString(),paid_amount:n.paid.toString()}}function d(t,e,o){const n=s._dayjs.utc(e).utcOffset(s.USER_UTC_OFFSET,!0),r=s._dayjs.utc(o).utcOffset(s.USER_UTC_OFFSET,!0),l=a.Helper.booktime.createFromDayjs(n),u=a.Helper.booktime.createFromDayjs(r),_=a.Helper.booktime.createFromAbsMinute(l.absMinute+t.buffer_before),m=a.Helper.booktime.createFromAbsMinute(u.absMinute-t.buffer_after),d=s.dayjs(n).startOf("day");return i(d,_,m,t.buffer_before,t.buffer_after)}const f={service_id:null,customer_ids:[],agent_ids:[],location_id:null,book_status:"pending",book_date:s.dayjs(),start_time:null,end_time:null,buffer_before:null,buffer_after:null,details:r,payment:l};function c(){const t=o.booksterHooks.applyFilters(o.HOOK_NAMES.adminApptForm.detailsInitBlueprint,r);return{...f,details:t}}const b=(t,e)=>{for(const s of t)for(const t of s.services||[])if(t.service_id===e)return t;return null};export{r as I,n as R,_ as a,m as b,l as c,d,b as f,c as g,u as p};
