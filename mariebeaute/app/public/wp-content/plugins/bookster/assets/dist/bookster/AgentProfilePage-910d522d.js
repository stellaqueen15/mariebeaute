import{r as e,f as t,_ as r,R as a,b as o,L as s,d as n,c as l}from"./prefetch.helper-4a4e89e7.js";import{P as m}from"./UIComponents-1eb3bdbf.js";import{v as i,_ as c}from"./phoneInput.helper-24509875.js";import{a as p,u}from"./page-agent.js";import{S as d}from"./Settings.styled-5e4db2ce.js";import{A as b}from"./AvatarPicker-e9de6b9b.js";import{l as f}from"./lodash-f550b173.js";import"./index-f3d162c1.js";import"./BEConfigProvider-697f66d7.js";import"./DeleteAppointmentButton-e4b7a1de.js";import"./createBookTimeInput.helper-a66a36a8.js";import"./useBreakpoint-2ef0bad1.js";import"./index-f9ec547e.js";import"./useEffectWithTarget-688d6bb0.js";import"./index-ad7a2af3.js";import"./appointment.helper-80ab8c9c.js";function E(){const m=p(),[E,_]=e.useState(""),g=u((e=>e.profile.isLoading)),h=u((e=>e.saveAgentProfile)),[w]=t.Form.useForm(),{toast:v}=r.useToast();return e.useEffect((()=>{_((null==m?void 0:m.transient_avatar_url)??"")}),[]),a.createElement("div",{className:"bw-relative bw-mx-auto bw-max-w-screen-md bw-p-6 bw-pt-4"},a.createElement("h4",{className:"bw-mb-3 bw-text-xl bw-font-medium"},o.sprintf(o.__("%(agent)s Profile","bookster"),s)),a.createElement("p",{className:"bw-mb-6 bw-text-base bw-text-base-foreground/60"},"You can change your personal information here.",a.createElement("br",null),o.sprintf(o.__("%(customers)s will see this information when they contact you.","bookster"),s)),a.createElement(r.Separator,{className:"bw-mb-12"}),a.createElement(t.Form,{form:w,initialValues:m??{},onFinish:e=>{!async function(e){try{await h(m.agent_id,f.pick(e,["first_name","last_name","avatar_id","phone"])),v.success("Profile has been Saved Successfully!")}catch(t){v.error(await l.getErrorMsg(t))}}(e)},scrollToFirstError:!0,layout:"vertical"},a.createElement(r.LoadingOverlay,{loading:g}),a.createElement(b,{avatarSrc:E,onSelectAvatar:e=>{w.setFieldValue("avatar_id",+e.id),_(e.url)}}),a.createElement(t.Form.Item,{name:"avatar_id",style:{display:"none"}},a.createElement("input",null)),a.createElement("div",{className:"bw-grid bw-grid-cols-1 bw-gap-x-4 sm:bw-grid-cols-2"},a.createElement(t.Form.Item,{label:o.__("First Name","bookster"),name:"first_name",rules:[{required:!0}]},a.createElement(r.Input,{placeholder:o.__("Please enter First Name","bookster"),autoFocus:!0})),a.createElement(t.Form.Item,{label:o.__("Last Name","bookster"),name:"last_name",rules:[{required:!0}]},a.createElement(r.Input,{placeholder:o.__("Please enter Last Name","bookster")})),a.createElement(t.Form.Item,{label:o.__("Phone","bookster"),name:"phone",rules:[{required:!0},{validator:i,validateTrigger:"onBlur"}],validateTrigger:["onBlur","onChange"]},a.createElement(c,null)),a.createElement(t.Form.Item,{label:o.__("Email","bookster"),name:"email"},a.createElement(r.Input,{disabled:!0}))),n.booksterHooks.applyFilters(n.HOOK_NAMES.agentProfileForm.EndForm,m,[]),a.createElement(d,null)))}function _(){return a.createElement(m,null,a.createElement(E,null))}export{_ as default};
